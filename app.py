import streamlit as stimport sqlite3import pandas as pdfrom datetime import datetime, timedelta# --- 1. DATABASE SETUP ---def init_db():    conn = sqlite3.connect('multi_group_verses.db')    c = conn.cursor()    # Added group_name column to keep groups separate    c.execute('''        CREATE TABLE IF NOT EXISTS entries (            id INTEGER PRIMARY KEY AUTOINCREMENT,            group_name TEXT NOT NULL,            user_name TEXT NOT NULL,            verse_text TEXT NOT NULL,            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP        )    ''')    conn.commit()    conn.close()def add_verse(group, name, verse):    conn = sqlite3.connect('multi_group_verses.db')    c = conn.cursor()    c.execute('INSERT INTO entries (group_name, user_name, verse_text) VALUES (?, ?, ?)', (group, name, verse))    conn.commit()    conn.close()def get_verses(group_filter):    conn = sqlite3.connect('multi_group_verses.db')    one_week_ago = (datetime.now() - timedelta(days=7)).strftime('%Y-%m-%d %H:%M:%S')        # Only fetch verses for the selected group    query = "SELECT user_name, verse_text, created_at FROM entries WHERE group_name = ? AND created_at >= ? ORDER BY created_at DESC"    df = pd.read_sql_query(query, conn, params=(group_filter, one_week_ago))    conn.close()    return df# --- 2. USER INTERFACE ---def main():    st.set_page_config(page_title="Multi-Group Verse Tracker", page_icon="??")    init_db()    # List your groups here    MY_GROUPS = ["Youth Ministry", "Adult Bible Study", "Sunday School", "Women's Fellowship"]    st.sidebar.title("Navigation")    page = st.sidebar.radio("Go to:", ["Submit a Verse", "View Weekly Collection"])    if page == "Submit a Verse":        st.title("?? Submit Your Verse")                with st.form("verse_form", clear_on_submit=True):            selected_group = st.selectbox("Which group are you in?", MY_GROUPS)            name = st.text_input("Your Name")            verse = st.text_area("Today's Verse", placeholder="Type the scripture here...")                        submitted = st.form_submit_button("Save to My Group")                        if submitted:                if name and verse:                    add_verse(selected_group, name, verse)                    st.success(f"Amen! Verse saved to the {selected_group} list.")                else:                    st.error("Please provide both your name and the verse.")    elif page == "View Weekly Collection":        st.title("??? Weekly Group Summary")                # Filter view by group        view_group = st.selectbox("Select Group to View:", MY_GROUPS)                st.subheader(f"Verses for: {view_group}")        data = get_verses(view_group)                if data.empty:            st.info(f"No verses have been submitted for {view_group} this week.")        else:            # Group by person's name            names = data['user_name'].unique()            for name in names:                with st.expander(f"?? {name}'s Verses", expanded=True):                    user_data = data[data['user_name'] == name]                    for idx, row in user_data.iterrows():                        dt = datetime.strptime(row['created_at'], '%Y-%m-%d %H:%M:%S')                        st.caption(f"{dt.strftime('%A, %b %d')}")                        st.info(row['verse_text'])if __name__ == "__main__":    main()